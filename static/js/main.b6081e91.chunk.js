(this["webpackJsonpaqua-client"]=this["webpackJsonpaqua-client"]||[]).push([[0],{75:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r=n(4),c=n.n(r),a=n(42),i=n.n(a),s=n(21),o=n(40),u=n(55),j=n.n(u),b=n(56),d=n(17),l="set_user",f="clear_user",O="set_photo_url",h="set_status_msg",p={currentUser:null,isLoading:!0},m=Object(o.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(d.a)(Object(d.a)({},e),{},{currentUser:t.payload,isLoading:!1});case f:return Object(d.a)(Object(d.a)({},e),{},{currentUser:null,isLoading:!1});case O:return Object(d.a)(Object(d.a)({},e),{},{currentUser:Object(d.a)(Object(d.a)({},e.currentUser),{},{photoURL:t.payload})});case h:return Object(d.a)(Object(d.a)({},e),{},{currentUser:Object(d.a)(Object(d.a)({},e.currentUser),{},{statusMsg:t.payload})});default:return e}}}),x=n(35),g=(n(75),n(1)),v=n.n(g),w=n(5),y=n(18);function k(e){return{type:l,payload:e}}function S(e){return{type:h,payload:e}}var C,B,I,T,M,U,F,R,z,E,D,L,_,P,q,N,A,H,W,G,V,J,X,Q,K,$,Y,Z,ee,te,ne,re,ce,ae,ie,se=n(22),oe=n(11),ue=n(16),je=n(12),be=n(6),de=n(9),le=n(10),fe="#233E8B",Oe="#1EAE98",he="#A9F1DF",pe="#FFFFC7",me=n(23),xe=le.a.section(C||(C=Object(de.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 0 1.5rem;\n"]))),ge=le.a.div(B||(B=Object(de.a)(["\n  width: 100%;\n  height: 1px;\n  background: #ececec;\n"]))),ve={Container:le.a.div(I||(I=Object(de.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 2rem 0.5rem 1rem;\n  "]))),Title:le.a.h2(T||(T=Object(de.a)(["\n    font-size: 1.5rem;\n    color: ",";\n  "])),fe),Buttons:le.a.div(M||(M=Object(de.a)(["\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n  "]))),SearchBtn:Object(le.a)(me.h)(U||(U=Object(de.a)(["\n    width: 1.5rem;\n    height: 1.5rem;\n    cursor: pointer;\n    color: ",";\n  "])),fe),AddFriendBtn:Object(le.a)(me.j)(F||(F=Object(de.a)(["\n    width: 1.5rem;\n    height: 1.5rem;\n    cursor: pointer;\n    color: ",";\n  "])),fe),AddChatBtn:Object(le.a)(me.e)(R||(R=Object(de.a)(["\n    width: 1.5rem;\n    height: 1.5rem;\n    cursor: pointer;\n    color: ",";\n  "])),fe),Input:le.a.input(z||(z=Object(de.a)(["\n    width: 90%;\n    height: calc(2rem + 4px);\n    border-radius: 2rem;\n    border: 2px solid ",";\n    padding: 0.625rem 1.25rem;\n    margin: 0 5% 0.5rem;\n    font-size: 0.75rem;\n  "])),Oe),ResultContainer:le.a.div(E||(E=Object(de.a)(["\n    display: flex;\n    justify-content: center;\n    gap: 0.5rem;\n    font-size: 0.75rem;\n    margin-bottom: 1rem;\n  "]))),Result:le.a.div(D||(D=Object(de.a)(["\n    display: flex;\n    gap: 0.5rem;\n\n    div {\n      width: 1rem;\n      height: 1rem;\n      border-radius: 0.25rem;\n      overflow: hidden;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    span {\n      line-height: 1rem;\n    }\n  "]))),Submit:Object(le.a)(me.a)(L||(L=Object(de.a)(["\n    width: 1rem;\n    height: 1rem;\n    color: ",";\n    cursor: pointer;\n  "])),Oe)},we={Container:le.a.div(_||(_=Object(de.a)([""]))),Title:le.a.h1(P||(P=Object(de.a)(["\n    padding: 0.5rem;\n    font-size: 0.8rem;\n    color: #777;\n    text-align: left;\n  "]))),Empty:le.a.p(q||(q=Object(de.a)(["\n    padding: 0.5rem;\n    border-radius: 0.5rem;\n    display: flex;\n    justify-content: left;\n    align-items: center;\n    gap: 0.5rem;\n    cursor: pointer;\n    background-color: ",";\n    color: #fff;\n  "])),Oe)},ye={Container:le.a.div(N||(N=Object(de.a)(["\n    padding: 0.5rem;\n    border-radius: 0.5rem;\n    display: flex;\n    justify-content: left;\n    align-items: center;\n    gap: 0.5rem;\n    cursor: pointer;\n\n    &:hover {\n      background-color: ",";\n      color: #fff;\n    }\n  "])),Oe),ImageBox:le.a.div(A||(A=Object(de.a)(["\n    width: ",";\n    height: ",";\n    border-radius: 35%;\n    border: 1px solid #ccc;\n    overflow: hidden;\n  "])),(function(e){return e.size}),(function(e){return e.size})),TextBox:le.a.div(H||(H=Object(de.a)(["\n    width: calc(100% - calc("," + 0.5rem));\n    display: flex;\n    flex-direction: column;\n    gap: 0.25rem;\n  "])),(function(e){return e.margin})),Title:le.a.h4(W||(W=Object(de.a)(["\n    font-size: 1rem;\n  "]))),LastMessage:le.a.div(G||(G=Object(de.a)(["\n    display: flex;\n    justify-content: space-between;\n  "]))),Content:le.a.p(V||(V=Object(de.a)(["\n    overflow-x: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  "]))),Time:le.a.span(J||(J=Object(de.a)(["\n    color: #777;\n    font-size: 0.75rem;\n    font-weight: 200;\n    min-width: 3.5rem;\n    text-align: right;\n  "])))};ye.ImageBox.defaultProps={size:"3rem"},ye.TextBox.defaultProps={margin:"3rem"};var ke={Container:le.a.div(X||(X=Object(de.a)(["\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    gap: 2.5rem;\n    cursor: initial;\n    background-color: ",";\n  "])),fe),Form:le.a.form(Q||(Q=Object(de.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    gap: 2.5rem;\n  "]))),ImageBox:le.a.div(K||(K=Object(de.a)(["\n    width: 5rem;\n    height: 5rem;\n    border: 1px solid #fff;\n    border-radius: 35%;\n    overflow: hidden;\n    cursor: pointer;\n  "]))),TextBox:le.a.div($||($=Object(de.a)(["\n    position: relative;\n    max-width: 320px;\n    padding: 0 1rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 0.5rem;\n    color: #fff;\n  "]))),Title:le.a.h3(Y||(Y=Object(de.a)(["\n    font-size: 1.25rem;\n    font-weight: 400;\n  "]))),Content:le.a.p(Z||(Z=Object(de.a)(["\n    width: fit-content;\n    min-height: 20px;\n    text-align: center;\n    font-weight: 200;\n    word-break: break-word;\n  "]))),ContentInputBox:le.a.div(ee||(ee=Object(de.a)(["\n    min-width: 40px;\n    max-width: 320px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  "]))),ContentInput:le.a.textarea(te||(te=Object(de.a)(["\n    width: ","px;\n    height: ","px;\n    min-height: 20px;\n    background-color: transparent;\n    color: #fff;\n    border: none;\n    border-bottom: 1px solid #fff;\n    text-align: center;\n    font-weight: 200;\n    overflow: hidden;\n    resize: none;\n  "])),(function(e){return e.width+16}),(function(e){return e.height})),ContentInputIcon:Object(le.a)(me.g)(ne||(ne=Object(de.a)(["\n    position: absolute;\n    bottom: 0;\n    right: -0.5rem;\n    cursor: pointer;\n\n    &:hover {\n      color: ",";\n    }\n  "])),Oe),BtnBox:le.a.div(re||(re=Object(de.a)(["\n    display: flex;\n    gap: 2rem;\n  "]))),GoBackBtn:Object(le.a)(me.b)(ce||(ce=Object(de.a)(["\n  width: 2rem;\n  height: 2rem;\n  padding 0.25rem;\n  border: 1px solid #fff;\n  border-radius: 0.25rem;\n  \n  cursor: pointer;\n  color: #fff;\n  &:hover {\n    color: ",";\n    border: 1px solid ",";\n  }\n  "])),Oe,Oe),SubmitBtn:Object(le.a)(me.f)(ae||(ae=Object(de.a)(["width: 2rem;\n  height: 2rem;\n  padding 0.25rem;\n  border: 1px solid #fff;\n  border-radius: 0.25rem;\n  \n  cursor: pointer;\n  color: #fff;\n  &:hover {\n    color: ",";\n    border: 1px solid ",";\n  }"])),Oe,Oe),ChatBtn:Object(le.a)(me.d)(ie||(ie=Object(de.a)(["\n    width: 2rem;\n    height: 2rem;\n    cursor: pointer;\n    color: #fff;\n    &:hover {\n      color: ",";\n    }\n  "])),Oe)};ke.ContentInput.defaultProps={width:40,height:20};var Se=n(3);var Ce=function(e){var t=Object(je.c)(),n=Object(r.useState)(""),c=Object(oe.a)(n,2),a=c[0],i=c[1],o=Object(r.useState)(""),u=Object(oe.a)(o,2),j=u[0],b=u[1],l=Object(s.c)((function(e){return e.user.currentUser})),f=function(e){i(e==a?"":e)},O=function(){return Object(Se.jsxs)(ve.ResultContainer,{children:[Object(Se.jsxs)(ve.Result,{children:[Object(Se.jsx)("div",{children:Object(Se.jsx)("img",{src:j.image})}),Object(Se.jsx)("span",{children:j.name})]}),Object(Se.jsx)(ve.Submit,{onClick:function(e){m()}})]})},h=function(t){var n=t.target.value.trim();e.renderSearched(n)},p=function(e){var n=e.target.value;Object(je.b)(Object(je.i)(Object(je.j)(t,"users/"),Object(je.g)("email"),Object(je.a)(n))).then((function(e){if(e.val()){var t=Object.values(e.val())[0];b(Object(d.a)(Object(d.a)({},t),{},{uid:Object.keys(e.val())[0]}))}else b("")})).catch((function(e){console.log("err",e)}))},m=function(){Object(je.m)(Object(je.j)(t,"users/"+l.uid+"/friends"),Object(be.a)({},j.uid,!0))};return Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsxs)(ve.Container,{children:[Object(Se.jsx)(ve.Title,{children:"\uce5c\uad6c"}),Object(Se.jsxs)(ve.Buttons,{children:[Object(Se.jsx)(ve.SearchBtn,{onClick:function(){f("\uce5c\uad6c \ucc3e\uae30")}}),Object(Se.jsx)(ve.AddFriendBtn,{onClick:function(){f("\uce5c\uad6c \ucd94\uac00")}})]})]}),a&&function(e){switch(e){case"\uce5c\uad6c \ucc3e\uae30":return Object(Se.jsx)(ve.Input,{type:"text",onChange:function(e){h(e)},placeholder:"\uc774\ub984\uc73c\ub85c \uce5c\uad6c \uac80\uc0c9"});case"\uce5c\uad6c \ucd94\uac00":return Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsx)(ve.Input,{type:"text",onChange:function(e){p(e)},placeholder:"Email\ub85c \uce5c\uad6c \ucd94\uac00"}),j&&O()]})}}(a)]})},Be=n(38),Ie=n(60),Te=n.n(Ie),Me=n(41);var Ue=function(e){var t=e.currentUser,n=Object(Me.b)(),c=Object(je.c)(),a=Object(se.b)(),i=Object(s.b)(),o=Object(r.useState)(),u=Object(oe.a)(o,2),j=u[0],b=u[1],l=Object(r.useState)(!1),f=Object(oe.a)(l,2),h=f[0],p=f[1],m=Object(r.useState)(t.statusMsg),x=Object(oe.a)(m,2),g=x[0],y=x[1],k=Object(r.useState)({}),C=Object(oe.a)(k,2),B=C[0],I=C[1],T=Object(r.useState)({width:40,height:20}),M=Object(oe.a)(T,2),U=M[0],F=M[1],R=Object(r.useState)(!1),z=Object(oe.a)(R,2),E=z[0],D=z[1],L=Object(Be.a)({defaultValues:{statusMsg:g},mode:"onSubmit"}),_=L.register,P=L.handleSubmit,q=(L.formState.errors,Object(r.useRef)()),N=Object(r.useRef)(),A=Object(r.useRef)(),H=Object(r.useRef)();Object(r.useEffect)((function(){F({width:q.current.offsetWidth,height:q.current.offsetHeight})}),[]);var W=function(){var r=Object(w.a)(v.a.mark((function r(){var s,o;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(D(!0),r.prev=1,!B.data){r.next=14;break}return r.next=5,Object(Me.d)(Object(Me.c)(n,"user_image/".concat(t.uid,".jpg")),B.data,B.metadata);case 5:return s=r.sent,r.next=8,Object(Me.a)(s.ref);case 8:return o=r.sent,r.next=11,Object(se.f)(a.currentUser,{photoURL:o});case 11:return r.next=13,Object(je.m)(Object(je.j)(c,"users/"+t.uid),{image:o});case 13:i({type:O,payload:o});case 14:return r.next=16,Object(je.m)(Object(je.j)(c,"users/"+t.uid),{statusMessage:g});case 16:i(S(g)),e.hideProfile(),r.next=23;break;case 20:r.prev=20,r.t0=r.catch(1),console.log(r.t0);case 23:D(!1);case 24:case"end":return r.stop()}}),r,null,[[1,20]])})));return function(){return r.apply(this,arguments)}}();return Object(Se.jsxs)(ke.Container,{children:[Object(Se.jsxs)(ke.Form,{onSubmit:P(W),children:[Object(Se.jsx)(ke.ImageBox,{onClick:function(){N.current.click()},children:Object(Se.jsx)("img",{src:null!==j&&void 0!==j?j:t.photoURL})}),Object(Se.jsxs)(ke.TextBox,{children:[Object(Se.jsxs)(ke.Title,{children:[" ",t.displayName]}),Object(Se.jsx)(ke.ContentInputBox,{children:h?Object(Se.jsx)(ke.ContentInput,Object(d.a)(Object(d.a)({},_("statusMsg")),{},{ref:A,onChange:function(e){!function(e){y(e.target.value),F({width:q.current.offsetWidth,height:q.current.offsetHeight})}(e)},width:U.width,height:U.height})):Object(Se.jsx)(ke.Content,{children:g})}),Object(Se.jsx)(ke.ContentInputIcon,{onClick:Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,void p((function(e){return!e}));case 2:A.current.focus();case 3:case"end":return e.stop()}}),e)})))})]}),Object(Se.jsxs)(ke.BtnBox,{children:[Object(Se.jsx)(ke.GoBackBtn,{onClick:function(){e.hideProfile()}}),Object(Se.jsx)(ke.SubmitBtn,{onClick:function(){H.current.click()}})]}),Object(Se.jsx)("input",{type:"file",name:"image",accept:"image/jpeg, image/png",ref:N,onChange:function(e){var t=e.target.files[0],n={contentType:Te.a.lookup(t.name)};if(e){var r=new FileReader;r.readAsDataURL(t),r.onload=function(e){b(e.target.result)}}I({data:t,metadata:n})},style:{display:"none"}}),Object(Se.jsx)("input",{type:"submit",ref:H,disabled:E,style:{display:"none"}})]}),Object(Se.jsx)(ke.Content,{ref:q,style:{position:"fixed",bottom:0,right:0,color:"transparent"},children:g})]})};var Fe=function(){var e=Object(r.useState)(!1),t=Object(oe.a)(e,2),n=t[0],c=t[1],a=Object(s.c)((function(e){return e.user.currentUser})),i=Object(s.b)(),o=Object(je.c)();return Object(r.useEffect)(Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(je.b)(Object(je.j)(o,"users/"+a.uid+"/statusMessage"));case 2:t=e.sent,i(S(t.val()));case 4:case"end":return e.stop()}}),e)}))),[]),Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsxs)(ye.Container,{onClick:function(){c(!0)},children:[Object(Se.jsx)(ye.ImageBox,{size:"3.5rem",children:Object(Se.jsx)("img",{src:a.photoURL})}),Object(Se.jsxs)(ye.TextBox,{margin:"3.5rem",children:[Object(Se.jsx)(ye.Title,{children:a.displayName}),a.statusMsg&&Object(Se.jsx)(ye.Content,{children:a.statusMsg})]})]}),n&&Object(Se.jsx)(Ue,{currentUser:a,hideProfile:function(){c(!1)}})]})};var Re=function(e){var t=Object(y.f)();return Object(Se.jsxs)(ke.Container,{children:[Object(Se.jsx)(ke.ImageBox,{children:Object(Se.jsx)("img",{src:e.friend.image})}),Object(Se.jsxs)(ke.TextBox,{children:[Object(Se.jsxs)(ke.Title,{children:[" ",e.friend.name]}),e.friend.statusMessage&&Object(Se.jsx)(ke.Content,{children:e.friend.statusMessage})]}),Object(Se.jsxs)(ke.BtnBox,{children:[Object(Se.jsx)(ke.GoBackBtn,{onClick:function(){e.hideProfile()}}),Object(Se.jsx)(ke.ChatBtn,{onClick:function(){t.push("/chat/".concat(e.friend.uid))}})]})]})};var ze=function(e){var t=Object(r.useState)(!1),n=Object(oe.a)(t,2),c=n[0],a=n[1];return Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsxs)(ye.Container,{onClick:function(){a(!0)},children:[Object(Se.jsx)(ye.ImageBox,{children:Object(Se.jsx)("img",{src:e.friend.image})}),Object(Se.jsxs)(ye.TextBox,{children:[Object(Se.jsxs)(ye.Title,{children:[" ",e.friend.name]}),e.friend.statusMessage&&Object(Se.jsx)(ye.Content,{children:e.friend.statusMessage})]})]}),c&&Object(Se.jsx)(Re,{friend:e.friend,hideProfile:function(){a(!1)}})]})};var Ee=function(e){return Object(Se.jsxs)(we.Container,{children:[Object(Se.jsxs)(we.Title,{children:["\uce5c\uad6c (",e.friendData.length,")"]}),function(){var t=[];return e.friendData.map((function(e,n){t.push(Object(Se.jsx)(ze,{friend:e},n))})),t.sort((function(e,t){return e.props.friend.name>t.props.friend.name?1:-1}))}()]})};var De=function(){var e=Object(s.c)((function(e){return e.user.currentUser})),t=Object(je.c)(),n=Object(je.j)(t,"users/"+e.uid+"/friends"),c=Object(r.useState)([]),a=Object(oe.a)(c,2),i=a[0],o=a[1],u=Object(r.useState)(!1),j=Object(oe.a)(u,2),b=j[0],d=j[1],l=Object(r.useState)([]),f=Object(oe.a)(l,2),O=f[0],h=f[1];Object(r.useEffect)((function(){return p(),function(){Object(je.d)(n)}}),[]);var p=function(){var e=[];Object(je.e)(n,(function(t){e.push(t.key);var n=new Set(e);e=Object(ue.a)(n),m(e)}))},m=function(){var e=Object(w.a)(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,Promise.all(n.map(function(){var e=Object(w.a)(v.a.mark((function e(n,c){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(je.b)(Object(je.j)(t,"users/"+n));case 2:a=e.sent,r.push(a.val()),r[c].uid=n;case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:o(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Se.jsxs)(xe,{children:[Object(Se.jsx)(Ce,{renderSearched:function(e){if(d(!0),e){var t=Object(ue.a)(i);h(t.filter((function(t){var n=new RegExp(e);return-1!=t.name.search(n)})))}else d(!1)}}),b?Object(Se.jsx)(Ee,{friendData:O}):Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsx)(Fe,{}),Object(Se.jsx)(ge,{}),Object(Se.jsx)(Ee,{friendData:i})]})]})};var Le=function(e){var t=Object(r.useState)(""),n=Object(oe.a)(t,2),c=n[0],a=n[1],i=function(t){var n=t.target.value.trim();e.renderSearched(n)};return Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsxs)(ve.Container,{children:[Object(Se.jsx)(ve.Title,{children:"\ucc44\ud305"}),Object(Se.jsx)(ve.Buttons,{children:Object(Se.jsx)(ve.SearchBtn,{onClick:function(){var e;a((e="\ucc44\ud305 \ucc3e\uae30")==c?"":e)}})})]}),c&&function(e){switch(e){case"\ucc44\ud305 \ucc3e\uae30":return Object(Se.jsx)(ve.Input,{type:"text",onChange:function(e){i(e)},placeholder:"\uce5c\uad6c \uc774\ub984\uc73c\ub85c \ucc44\ud305 \uac80\uc0c9"})}}(c)]})};var _e=function(e){var t=Object(y.f)(),n=Object(je.c)();return Object(je.j)(n,"users/"+e.chat.friendId),Object(Se.jsxs)(ye.Container,{onClick:function(){t.push("/chat/".concat(e.chat.friend.uid))},children:[Object(Se.jsx)(ye.ImageBox,{children:Object(Se.jsx)("img",{src:e.chat.friend.image})}),Object(Se.jsxs)(ye.TextBox,{children:[Object(Se.jsxs)(ye.Title,{children:[" ",e.chat.friend.name]}),e.chat.lastUpdate&&Object(Se.jsxs)(ye.LastMessage,{children:[Object(Se.jsx)(ye.Content,{children:e.chat.lastUpdate.content})," ",Object(Se.jsx)(ye.Time,{children:function(){var t=new Date,n=new Date(e.chat.lastUpdate.timestamp);return t.getDate()!=n.getDate()?"".concat(n.getMonth()+1,"\uc6d4 ").concat(n.getDate(),"\uc77c"):"".concat(n.getHours(),":").concat(n.getMinutes())}()})]})]})]})};var Pe=function(e){return Object(Se.jsx)(we.Container,{children:e.chatData[0]?function(){var t=[];return e.chatData.map((function(e,n){t.push(Object(Se.jsx)(_e,{chat:e},n))})),t.sort((function(e,t){return e.props.chat.lastUpdate.timestamp<t.props.chat.lastUpdate.timestamp?1:-1}))}():Object(Se.jsx)(we.Empty,{children:"\ucc44\ud305 \ubaa9\ub85d\uc774 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4."})})};var qe=function(){var e=Object(s.c)((function(e){return e.user.currentUser})),t=Object(je.c)(),n=Object(je.j)(t,"users/"+(null===e||void 0===e?void 0:e.uid)+"/chats"),c=Object(r.useState)([]),a=Object(oe.a)(c,2),i=a[0],o=a[1],u=Object(r.useState)(!1),j=Object(oe.a)(u,2),b=j[0],l=j[1],f=Object(r.useState)([]),O=Object(oe.a)(f,2),h=O[0],p=O[1];Object(r.useEffect)((function(){return m(),function(){Object(je.d)(n)}}),[]);var m=function(){var e=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(je.f)(n,function(){var e=Object(w.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.val()&&x(Object.keys(t.val()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(w.a)(v.a.mark((function e(n,r){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[],e.next=3,Promise.all(n.map(function(){var e=Object(w.a)(v.a.mark((function e(n,r){var a,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(je.b)(Object(je.j)(t,"chatRooms/"+n));case 2:return a=e.sent,i=a.val(),e.next=6,g(n);case 6:s=e.sent,c.push(Object(d.a)(Object(d.a)({},i),{},{friend:s}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:o(c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(w.a)(v.a.mark((function e(n){var r,c,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y(n),e.next=3,Object(je.b)(Object(je.j)(t,"users/"+r));case 3:return c=e.sent,a=Object(d.a)(Object(d.a)({},c.val()),{},{uid:r}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(t){return e.uid==t.substring(0,28)?t.substring(28):t.substring(0,28)};return Object(Se.jsxs)(xe,{children:[Object(Se.jsx)(Le,{renderSearched:function(e){if(l(!0),e){var t=Object(ue.a)(i);p(t.filter((function(t){var n=new RegExp(e);return-1!=t.friend.name.search(n)})))}else l(!1)}}),Object(Se.jsx)(Pe,{chatData:b?h:i})]})};var Ne=function(){return Object(Se.jsx)(ve.Container,{children:Object(Se.jsx)(ve.Title,{children:"\ub354 \ubcf4\uae30"})})};var Ae,He,We,Ge,Ve,Je,Xe=function(){return Object(Se.jsxs)(xe,{children:[Object(Se.jsx)(Ne,{})," * \uc774 \ud398\uc774\uc9c0\uc5d0 \ub4e4\uc5b4\uac08 \ucd94\uac00\uc801\uc778 \uae30\ub2a5\uc740 \ucd94\ud6c4 \uac1c\ubc1c \uc608\uc815\uc785\ub2c8\ub2e4."]})},Qe=n(49),Ke=n(50),$e=le.a.nav(Ae||(Ae=Object(de.a)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 4rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #fff;\n  box-shadow: 0 0 0.5rem rgba(30, 174, 152, 0.3);\n"]))),Ye=le.a.ul(He||(He=Object(de.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n"]))),Ze=Object(le.a)(Qe.b)(We||(We=Object(de.a)(["\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return"true"==e.on?fe:Oe}),fe),et=Object(le.a)(Qe.a)(Ge||(Ge=Object(de.a)(["\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return"true"==e.on?fe:Oe}),fe),tt=Object(le.a)(Ke.b)(Ve||(Ve=Object(de.a)(["\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return"true"==e.on?fe:Oe}),fe),nt=Object(le.a)(Ke.a)(Je||(Je=Object(de.a)(["\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"])),Oe,fe);var rt=function(e){var t=Object(se.b)();return Object(Se.jsx)($e,{children:Object(Se.jsxs)(Ye,{children:[Object(Se.jsx)("li",{children:Object(Se.jsx)(Ze,{onClick:function(){e.handleTab("friend")},on:"friend"===e.tab?"true":"false"})}),Object(Se.jsx)("li",{children:Object(Se.jsx)(et,{onClick:function(){e.handleTab("chat")},on:"chat"===e.tab?"true":"false"})}),Object(Se.jsx)("li",{children:Object(Se.jsx)(tt,{onClick:function(){e.handleTab("more")},on:"more"===e.tab?"true":"false"})}),Object(Se.jsx)("li",{children:Object(Se.jsx)(nt,{onClick:function(){Object(se.e)(t)}})})]})})};var ct,at,it,st,ot,ut,jt,bt,dt=function(){var e=Object(r.useState)("friend"),t=Object(oe.a)(e,2),n=t[0],c=t[1];return Object(Se.jsxs)(Se.Fragment,{children:[function(){switch(n){case"friend":return Object(Se.jsx)(De,{});case"chat":return Object(Se.jsx)(qe,{});case"more":return Object(Se.jsx)(Xe,{});default:alert("something wrong..")}}(),Object(Se.jsx)(rt,{tab:n,handleTab:function(e){c(e)}})]})},lt=le.a.div(ct||(ct=Object(de.a)(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background: linear-gradient(70deg, ",", ",");\n"])),Oe,he),ft=le.a.h1(at||(at=Object(de.a)(["\n  font-size: ",';\n  font-family: "Barlow", sans-serif;\n  font-weight: 100;\n  color: ',";\n  text-shadow: 2px 2px 2px ",";\n  margin-bottom: 2rem;\n"])),(function(e){return e.size}),fe,pe);ft.defaultProps={size:"2rem"};var Ot=le.a.form(it||(it=Object(de.a)(["\n  width: 240px;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  color: ",";\n"])),fe),ht=le.a.div(st||(st=Object(de.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n"]))),pt=le.a.input(ot||(ot=Object(de.a)(["\n  padding: 0.5rem;\n  color:",";\n  background: ",";\n  border: 1px solid ",";\n  box-shadow: 1px 1px 1px ",";\n  &:focus {\n    background: ",";\n    outline : 1.5px solid ",";\n    }\n  }\n"])),fe,he,Oe,pe,pe,fe),mt=le.a.input(ut||(ut=Object(de.a)(["\n  margin-top: 1rem;\n  height: 40px;\n  color: ",";\n  text-shadow: 1px 1px 1px ",";\n  background: ",";\n\n  border: 1px solid ",";\n  box-shadow: 1px 1px 1px ",";\n  &:hover {\n    cursor: pointer;\n    text-shadow: 1px 1px 1px ",";\n    background: ",";\n    outline: 1.5px solid ",";\n  }\n"])),fe,pe,he,Oe,pe,he,pe,fe),xt=le.a.p(jt||(jt=Object(de.a)(["\n  font-size: 0.8rem;\n  color: crimson;\n"]))),gt=Object(le.a)(x.b)(bt||(bt=Object(de.a)(["\n  text-decoration: underline;\n  color: ",";\n  &:hover {\n    color: #fff;\n  }\n"])),fe);var vt=function(){var e=Object(se.b)(),t=Object(Be.a)({mode:"onSubmit"}),n=t.register,c=t.handleSubmit,a=t.formState.errors,i=Object(r.useState)(),s=Object(oe.a)(i,2),o=s[0],u=s[1],j=Object(r.useState)(!1),b=Object(oe.a)(j,2),l=b[0],f=b[1],O=function(){var t=Object(w.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(!0),t.next=4,Object(se.d)(e,n.email,n.password);case 4:f(!1),t.next=13;break;case 7:t.prev=7,t.t0=t.catch(0),"Firebase: Error (auth/user-not-found)."==t.t0.message?u("\uac00\uc785\ub418\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c \uc785\ub2c8\ub2e4."):"Firebase: Error (auth/wrong-password)."==t.t0.message?u("\ube44\ubc00\ubc88\ud638\ub97c \ub2e4\uc2dc \ud655\uc778\ud574\uc8fc\uc138\uc694."):u(t.t0.message),f(!1),console.log("error",t.t0.message),setTimeout((function(){u("")}),5e3);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(Se.jsxs)(lt,{children:[Object(Se.jsxs)(ft,{size:"3rem",children:["Aqua",Object(Se.jsx)(me.k,{style:{width:"1.5rem",verticalAlign:"top",marginLeft:10}})]}),Object(Se.jsxs)(Ot,{onSubmit:c(O),children:[Object(Se.jsxs)(ht,{children:[Object(Se.jsx)("label",{children:"\uc774\uba54\uc77c"}),Object(Se.jsx)(pt,Object(d.a)({type:"email",name:"email"},n("email",{required:!0,pattern:/^\S+@\S+$/i}))),a.email&&Object(Se.jsx)(xt,{children:" \uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."})]}),Object(Se.jsxs)(ht,{children:[Object(Se.jsx)("label",{children:"\ube44\ubc00\ubc88\ud638"}),Object(Se.jsx)(pt,Object(d.a)({type:"password",name:"password"},n("password",{required:!0,minLength:8}))),a.password&&"required"===a.password.type&&Object(Se.jsx)(xt,{children:" \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."}),a.password&&"minLength"===a.password.type&&Object(Se.jsx)(xt,{children:" \ucd5c\uc18c 8\uc790"})]}),o&&Object(Se.jsx)(xt,{children:o}),Object(Se.jsx)(mt,{type:"submit",value:"\ub85c\uadf8\uc778",disabled:l}),Object(Se.jsx)(gt,{to:"register",children:"\uc544\uc9c1 \uc544\uc774\ub514\uac00 \uc5c6\ub2e4\uba74..."})]})]})},wt=n(61),yt=(Object(wt.a)({apiKey:"AIzaSyD-DfS739VzKJU8_qPfhMZyMnRPj5gGeaQ",authDomain:"react-chattingapp.firebaseapp.com",projectId:"react-chattingapp",storageBucket:"react-chattingapp.appspot.com",messagingSenderId:"135876930581",appId:"1:135876930581:web:a40fee1af6ad1a6363721c",measurementId:"G-HQJS3PV87Q"}),n(62)),kt=n.n(yt);var St,Ct,Bt,It,Tt,Mt,Ut,Ft,Rt,zt,Et,Dt,Lt,_t,Pt=function(){var e=Object(se.b)(),t=Object(je.c)(),n=Object(Be.a)({mode:"onSubmit"}),c=n.register,a=n.watch,i=n.handleSubmit,s=n.formState.errors,o=Object(r.useRef)();o.current=a("password");var u=Object(r.useState)(),j=Object(oe.a)(u,2),b=j[0],l=j[1],f=Object(r.useState)(!1),O=Object(oe.a)(f,2),h=O[0],p=O[1],m=function(){var n=Object(w.a)(v.a.mark((function n(r){var c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,p(!0),n.next=4,Object(se.a)(e,r.email,r.password);case 4:return c=e.currentUser,n.next=7,Object(se.f)(c,{displayName:r.name,photoURL:"http://gravatar.com/avatar/".concat(kt()(c.email),"?d=identicon")});case 7:return n.next=9,Object(je.l)(Object(je.j)(t,"users/"+c.uid),{email:c.email,name:c.displayName,image:c.photoURL,friends:{JIgPFjBwBYP5qI00Lzy3bkahkA13:!0}});case 9:p(!1),n.next=19;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0),"Firebase: Error (auth/email-already-in-use)."==n.t0.message?l("\uc774\ubbf8 \uac00\uc785\ub41c \uc774\uba54\uc77c\uc785\ub2c8\ub2e4."):l(n.t0.message),p(!1),console.log("error",n.t0.message),setTimeout((function(){l("")}),5e3);case 19:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(Se.jsxs)(lt,{children:[Object(Se.jsx)(ft,{children:"\ud68c\uc6d0 \uac00\uc785"}),Object(Se.jsxs)(Ot,{onSubmit:i(m),children:[Object(Se.jsx)(xt,{style:{textAlign:"right"},children:"* \ud544\uc218 \uc785\ub825"}),Object(Se.jsxs)(ht,{children:[Object(Se.jsx)("label",{children:"\uc774\uba54\uc77c*"}),Object(Se.jsx)(pt,Object(d.a)({type:"email",name:"email"},c("email",{required:!0,pattern:/^\S+@\S+$/i}))),s.email&&"required"===s.email.type&&Object(Se.jsx)(xt,{children:" \ud544\uc218 \uc785\ub825 \uc0ac\ud56d\uc785\ub2c8\ub2e4."}),s.email&&"pattern"===s.email.type&&Object(Se.jsx)(xt,{children:" \uc774\uba54\uc77c \ud615\uc2dd\uc5d0 \ub9de\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."})]}),Object(Se.jsxs)(ht,{children:[Object(Se.jsx)("label",{children:"\uc774\ub984*"}),Object(Se.jsx)(pt,Object(d.a)({type:"text",name:"name"},c("name",{required:!0,minLength:2,maxLength:8}))),s.name&&"required"===s.name.type&&Object(Se.jsx)(xt,{children:" \ud544\uc218 \uc785\ub825 \uc0ac\ud56d\uc785\ub2c8\ub2e4."}),s.name&&("minLength"===s.name.type||"maxLength"===s.name.type)&&Object(Se.jsx)(xt,{children:" \uc785\ub825 \uae38\uc774\ub97c \ub2e4\uc2dc \ud655\uc778\ud574\uc8fc\uc138\uc694. (2-8\uae00\uc790)"})]}),Object(Se.jsxs)(ht,{children:[Object(Se.jsx)("label",{children:"\ube44\ubc00\ubc88\ud638*"}),Object(Se.jsx)(pt,Object(d.a)({type:"password",name:"password"},c("password",{required:!0,minLength:8}))),s.password&&"required"===s.password.type&&Object(Se.jsx)(xt,{children:" \ud544\uc218 \uc785\ub825 \uc0ac\ud56d\uc785\ub2c8\ub2e4."}),s.password&&"minLength"===s.password.type&&Object(Se.jsx)(xt,{children:" \ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 8\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."})]}),Object(Se.jsxs)(ht,{children:[Object(Se.jsx)("label",{children:"\ube44\ubc00\ubc88\ud638 \ud655\uc778*"}),Object(Se.jsx)(pt,Object(d.a)({type:"password",name:"password_confirm"},c("password_confirm",{required:!0,validate:function(e){return e===o.current}}))),s.password_confirm&&"required"===s.password_confirm.type&&Object(Se.jsx)(xt,{children:" \ud544\uc218 \uc785\ub825 \uc0ac\ud56d\uc785\ub2c8\ub2e4."}),s.password_confirm&&"validate"===s.password_confirm.type&&Object(Se.jsx)(xt,{children:" \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."})]}),b&&Object(Se.jsxs)(xt,{children:[" ",b]}),Object(Se.jsx)(mt,{type:"submit",value:"\ud68c\uc6d0\uac00\uc785",disabled:h}),Object(Se.jsx)(gt,{to:"login",children:"\uc774\ubbf8 \uc544\uc774\ub514\uac00 \uc788\ub2e4\uba74..."})]})]})},qt={Wrapper:le.a.div(St||(St=Object(de.a)(["\n    width: 100%;\n    height: 3rem;\n    padding: 0 1.5rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    box-shadow: 0 0 0.5rem rgba(30, 174, 152, 0.3);\n  "]))),GoBackBtn:Object(le.a)(me.c)(Ct||(Ct=Object(de.a)(["\n    width: 1.5rem;\n    height: 2rem;\n    color: ",";\n    cursor: pointer;\n  "])),Oe),FriendName:le.a.h2(Bt||(Bt=Object(de.a)(["\n    font-size: 1rem;\n    font-weight: 400;\n  "]))),SearchBtn:Object(le.a)(me.h)(It||(It=Object(de.a)(["\n    width: 1.5rem;\n    height: 1.5rem;\n    color: ",";\n    cursor: pointer;\n  "])),Oe),SearchInputWrapper:le.a.div(Tt||(Tt=Object(de.a)(["\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  "]))),SearchInput:le.a.input(Mt||(Mt=Object(de.a)(["\n    width: 80%;\n    height: 2rem;\n    border-radius: 2rem;\n    border: 2px solid ",";\n    padding: 0.625rem 1.25rem;\n  "])),Oe)},Nt={Wrapper:le.a.div(Ut||(Ut=Object(de.a)(["\n    width: 100%;\n    height: calc(100vh - 6rem);\n    padding: 1rem 1.5rem 0;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    overflow-y: auto;\n    background: ",";\n  "])),he),MessageWrapper:le.a.div(Ft||(Ft=Object(de.a)(["\n    width: 100%;\n    display: flex;\n    align-items: end;\n    gap: 0.5rem;\n    &.mine {\n      align-self: end;\n      flex-direction: row-reverse;\n    }\n    &.yours {\n      align-self: start;\n    }\n  "]))),FriendImgBox:le.a.div(Rt||(Rt=Object(de.a)(["\n    width: 2rem;\n    height: 2rem;\n    border-radius: 1rem;\n    overflow: hidden;\n  "]))),Message:le.a.p(zt||(zt=Object(de.a)(["\n    max-width: calc(100% - 6.5rem);\n    padding: 0.5rem 0.75rem;\n    border-radius: 0.5rem;\n    box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);\n    line-height: 1.5rem;\n    font-size: 1rem;\n    font-weight: 400;\n    word-break: break-all;\n\n    &.mine {\n      border-bottom-right-radius: 0;\n      background-color: ",";\n      color: #fff;\n    }\n    &.yours {\n      border-top-left-radius: 0;\n      background-color: #fff;\n    }\n  "])),Oe),MessageTime:le.a.span(Et||(Et=Object(de.a)(["\n    color: #777;\n    font-size: 0.75rem;\n    font-weight: 200;\n    min-width: 3.5rem;\n    margin-bottom: 0.25rem;\n\n    &.mine {\n      text-align: right;\n    }\n  "])))},At={Form:le.a.form(Dt||(Dt=Object(de.a)(["\n    width: 100%;\n    height: 3rem;\n    padding: 0 1.5rem;\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n  "]))),InputText:le.a.input(Lt||(Lt=Object(de.a)(["\n    width: 100%;\n    height: 2rem;\n    border-radius: 2rem;\n    border: 2px solid ",";\n    padding: 0.625rem 1.25rem;\n  "])),Oe),Submit:Object(le.a)(me.i)(_t||(_t=Object(de.a)(["\n    width: 2rem;\n    height: 2rem;\n    padding 0.325rem;\n    border-radius:1rem;\n    background-color: ",";\n    color: #fff;\n    cursor:pointer;\n  "])),Oe)};var Ht=function(e){var t,n=Object(y.f)(),c=Object(r.useState)(!1),a=Object(oe.a)(c,2),i=a[0],s=a[1];return Object(Se.jsxs)(qt.Wrapper,{children:[Object(Se.jsx)(qt.GoBackBtn,{onClick:function(){n.goBack()}}),i?Object(Se.jsx)(qt.SearchInput,{onChange:function(t){e.handleSearchMessage(t.target.value.trim())}}):Object(Se.jsxs)(qt.FriendName,{children:[null===(t=e.currentFriend)||void 0===t?void 0:t.name," \ub2d8 \uacfc\uc758 \ub300\ud654"]}),Object(Se.jsx)(qt.SearchBtn,{onClick:function(){s((function(e){return!e}))}})]})};var Wt=function(e){var t=Object(s.c)((function(e){return e.user.currentUser})),n=Object(r.useState)(),c=Object(oe.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){e.message.user.id==t.uid?i(!0):i(!1)}),[]),Object(Se.jsxs)(Nt.MessageWrapper,{className:a?"mine":"yours",children:[a||Object(Se.jsx)(Nt.FriendImgBox,{children:Object(Se.jsx)("img",{src:e.message.user.image})}),Object(Se.jsx)(Nt.Message,{className:a?"mine":"yours",children:e.message.content}),Object(Se.jsx)(Nt.MessageTime,{className:a?"mine":"yours",children:function(){var t=new Date,n=new Date(e.message.timestamp);return t.getDate()!=n.getDate()?"".concat(n.getMonth()+1,"\uc6d4 ").concat(n.getDate(),"\uc77c"):n.getHours()<10&&n.getMinutes()<10?"0".concat(n.getHours(),":0").concat(n.getMinutes()):n.getHours()>10&&n.getMinutes()<10?"".concat(n.getHours(),":0").concat(n.getMinutes()):n.getHours()<10&&n.getMinutes()>10?"0".concat(n.getHours(),":").concat(n.getMinutes()):"".concat(n.getHours(),":").concat(n.getMinutes())}()})]})};var Gt=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current.scrollIntoView()}),[e]),Object(Se.jsxs)(Nt.Wrapper,{children:[function(e){if(e.length>0)return e.map((function(e){return Object(Se.jsx)(Wt,{message:e},e.timestamp)}))}(e.messages),Object(Se.jsx)("div",{ref:t})]})};var Vt=function(e){var t=Object(r.useRef)(),n=function(){var n=Object(w.a)(v.a.mark((function n(){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.sendMessage(t.current.value.trim());case 2:t.current.value="";case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(Se.jsxs)(At.Form,{onSubmit:function(e){e.preventDefault(),n()},children:[Object(Se.jsx)(At.InputText,{type:"text",ref:t}),Object(Se.jsx)(At.Submit,{onClick:n})]})};var Jt,Xt,Qt,Kt,$t,Yt=function(){var e=Object(je.c)(),t=Object(s.c)((function(e){return e.user.currentUser})),n=Object(y.g)().friendUid,c=Object(r.useState)(),a=Object(oe.a)(c,2),i=a[0],o=a[1],u=Object(r.useState)([]),j=Object(oe.a)(u,2),b=j[0],d=j[1],l=Object(r.useState)([]),f=Object(oe.a)(l,2),O=f[0],h=f[1],p=Object(r.useState)(!1),m=Object(oe.a)(p,2),x=m[0],g=m[1],k=Object(r.useState)(!1),S=Object(oe.a)(k,2),C=(S[0],S[1]);Object(r.useEffect)(Object(w.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(je.b)(Object(je.j)(e,"users/"+n)).then((function(e){o(e.val())}));case 2:case"end":return t.stop()}}),t)}))),[]);var B=function(e,t){return e>t?e+t:t+e}(t.uid,n);Object(r.useEffect)((function(){return I(),function(){Object(je.d)(Object(je.j)(e,"chatRooms/"+B+"/messages")),d([])}}),[]);var I=function(){Object(je.f)(Object(je.j)(e,"chatRooms/"+B+"/messages"),(function(e){e.val()&&d(Object.values(e.val()))}))},T=function(){var r=Object(w.a)(v.a.mark((function r(c){var a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!c){r.next=13;break}return a={timestamp:Object(je.k)(e),user:{id:t.uid,name:t.displayName,image:t.photoURL},content:c},C(!0),r.next=5,Object(je.h)(Object(je.j)(e,"chatRooms/"+B+"/messages"),a);case 5:return r.next=7,Object(je.m)(Object(je.j)(e,"chatRooms/"+B),{lastUpdate:a});case 7:if(b[0]){r.next=12;break}return r.next=10,Object(je.m)(Object(je.j)(e,"users/"+t.uid+"/chats"),Object(be.a)({},B,!0));case 10:return r.next=12,Object(je.m)(Object(je.j)(e,"users/"+n+"/chats"),Object(be.a)({},B,!0));case 12:C(!1);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(Se.jsxs)("div",{children:[Object(Se.jsx)(Ht,{currentFriend:i,handleSearchMessage:function(e){if(e){g(!0);var t=Object(ue.a)(b),n=new RegExp(e,"gi"),r=t.reduce((function(e,t){return(t.content&&t.content.match(n)||t.user.name.match(n))&&e.push(t),e}),[]);h(r)}else g(!1)}}),Object(Se.jsx)(Gt,{messages:x?O:b}),Object(Se.jsx)(Vt,{sendMessage:T})]})},Zt=Object(le.b)(Jt||(Jt=Object(de.a)(["\n0%{transform:rotate(0deg);}\n100%{transform:rotate(360deg);}\n"]))),en=Object(le.b)(Xt||(Xt=Object(de.a)(["\n0%{width:2.5rem;}\n100%{width:0rem;}\n"]))),tn=le.a.div(Qt||(Qt=Object(de.a)(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 1rem;\n  background: ",";\n"])),fe),nn=le.a.div(Kt||(Kt=Object(de.a)(["\n  position: relative;\n  width: ",";\n  height: ",";\n  border-radius: 50%;\n  background: linear-gradient(45deg, transparent, transparent 40%, ",");\n  animation: ",' 3s linear infinite;\n\n  &:before {\n    content: "";\n    position: absolute;\n    top: 5%;\n    right: 5%;\n    bottom: 5%;\n    left: 5%;\n    border-radius: 50%;\n    background: ',';\n    z-index: 222;\n  }\n  &:after {\n    content: "";\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border-radius: 50%;\n    background: linear-gradient(45deg, transparent, transparent 40%, ',");\n    z-index: 111;\n    filter: blur(1rem);\n  }\n"])),(function(e){return e.size}),(function(e){return e.size}),Oe,Zt,fe,he);nn.defaultProps={size:"8rem"};var rn=le.a.p($t||($t=Object(de.a)(["\n  position: relative;\n  font-size: 2rem;\n  font-weight: 200;\n  color: ",';\n  &:before {\n    content: "";\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    width: 2rem;\n    background: ',";\n    z-index: 111;\n    animation: "," 3s linear infinite;\n  }\n"])),pe,fe,en);var cn=function(){return Object(Se.jsxs)(tn,{children:[Object(Se.jsx)(nn,{}),Object(Se.jsx)(rn,{children:"\xa0\xa0loading ...\xa0"})]})};n(84);var an=function(){var e=Object(s.b)(),t=Object(y.f)(),n=Object(se.b)(),c=Object(s.c)((function(e){return e.user.isLoading}));return Object(r.useEffect)((function(){Object(se.c)(n,function(){var n=Object(w.a)(v.a.mark((function n(r){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r){n.next=6;break}return n.next=3,e(k(r));case 3:t.push("/"),n.next=8;break;case 6:t.push("/login"),e({type:f});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[]),c?Object(Se.jsx)(cn,{}):Object(Se.jsx)("div",{className:"App",children:Object(Se.jsxs)(y.c,{children:[Object(Se.jsx)(y.a,{exact:!0,path:"/",children:Object(Se.jsx)(dt,{})}),Object(Se.jsx)(y.a,{path:"/login",children:Object(Se.jsx)(vt,{})}),Object(Se.jsx)(y.a,{path:"/register",children:Object(Se.jsx)(Pt,{})}),Object(Se.jsx)(y.a,{path:"/chat/:friendUid",children:Object(Se.jsx)(Yt,{})})]})})},sn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},on=Object(o.a)(j.a,b.a)(o.c);i.a.render(Object(Se.jsx)(c.a.StrictMode,{children:Object(Se.jsx)(s.a,{store:on(m,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),children:Object(Se.jsx)(x.a,{children:Object(Se.jsx)(an,{})})})}),document.getElementById("root")),sn()}},[[85,1,2]]]);
//# sourceMappingURL=main.b6081e91.chunk.js.map